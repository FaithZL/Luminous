cmake_minimum_required(VERSION 3.16...3.17)
cmake_policy(VERSION 3.16)

project(LuisaRender LANGUAGES C CXX VERSION 0.2.0)

set(CMAKE_INSTALL_PREFIX "${CMAKE_SOURCE_DIR}/install")

set(CMAKE_SKIP_BUILD_RPATH FALSE)
set(CMAKE_BUILD_WITH_INSTALL_RPATH FALSE)
set(CMAKE_INSTALL_RPATH "${CMAKE_INSTALL_PREFIX}/bin")
set(CMAKE_INSTALL_RPATH_USE_LINK_PATH TRUE)

if (${CMAKE_HOST_SYSTEM_NAME} MATCHES "Darwin")
    set(LUISA_RENDER_ENABLE_METAL_DEFAULT ON)
else ()
    set(LUISA_RENDER_ENABLE_METAL_DEFAULT OFF)
endif ()
option(LUISA_RENDER_ENABLE_METAL "Build with Apple Metal support" ${LUISA_RENDER_ENABLE_METAL_DEFAULT})

add_subdirectory(src)
